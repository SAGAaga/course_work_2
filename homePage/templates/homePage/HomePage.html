{% extends 'base.html' %} {% load static %} {% block head %}
<title>Home Page</title>
<link
  rel="stylesheet"
  href="{% static 'css/home_page.css' %}"
  type="text/css"
/>
{% endblock %} {% block content %}
<div class="info">
  In avarage one single accomodation has {{single_accomodation}} contracts, it
  means that some accomodations has {{more_or_actually}} contract and owner
</div>
<section>
  <section class="row-section">
    <section class="table-section" id="contracts">
      <!--for demo wrap-->
      <h1>All User Contracts</h1>
      <div class="tbl-header">
        <table cellpadding="0" cellspacing="0" border="0">
          <thead>
            <tr>
              <th
                colspan="2"
                onclick="sort_click(this,'contracts', 'contract_number')"
              >
                Contract Number
              </th>
              <th colspan="2" onclick="sort_click(this,'contracts', 'address')">
                Accomodation
              </th>
              <th colspan="2" onclick="sort_click(this,'contracts', 'term')">
                Is Active To
              </th>
              <th colspan="3">
                <button onclick="window.location.href='Create_Contract/'">
                  Add
                </button>
                <div class="input_search_box">
                  <input
                    type="text"
                    class="input_search"
                    onkeyup="filtering(this,'contracts')"
                  />
                  <span class="input_search_button" onclick="clear_input(this)"
                    >+</span
                  >
                </div>
              </th>
            </tr>
          </thead>
        </table>
      </div>
      <div class="tbl-content">
        <table cellpadding="0" cellspacing="0" border="0">
          <tbody>
            {% for contract in all_user_contracts %}
            <tr>
              <td colspan="2">{{contract.contract_number}}</td>
              <td colspan="2">{{contract.accomodation.address}}</td>
              <td colspan="2">{{contract.term}}</td>
              <td colspan="3">
                <button
                  onclick="window.location.href='All_Contracts/{{contract.contract_number}}/delete'"
                >
                  Delete
                </button>

                <button
                  onclick="window.location.href='All_Contracts/{{contract.contract_number}}/edit'"
                >
                  Edit
                </button>

                <button
                  onclick="window.location.href='All_Contracts/{{contract.contract_number}}/Report'"
                >
                  Get Report
                </button>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </section>

    <section class="table-section" id="payments">
      <!--for demo wrap-->
      <h1>Payments</h1>
      <div class="tbl-header">
        <table cellpadding="0" cellspacing="0" border="0">
          <thead>
            <tr>
              <th
                colspan="3"
                onclick="sort_click(this,'payments', 'contract_number_id')"
              >
                Contract
              </th>
              <th
                colspan="3"
                onclick="sort_click(this,'payments', 'payment_id')"
              >
                Payment number
              </th>
              <th colspan="3" onclick="sort_click(this,'payments', 'summ')">
                Sum
              </th>
              <th
                colspan="5"
                onclick="sort_click(this,'payments', 'pay_datetime')"
              >
                Date
              </th>
              <th colspan="6">
                <button onclick="window.location.href='Pay/'">Add</button>
                <div class="input_search_box">
                  <input
                    type="text"
                    class="input_search"
                    onkeyup="filtering(this,'payments')"
                  />
                  <span class="input_search_button" onclick="clear_input(this)"
                    >+</span
                  >
                </div>
              </th>
            </tr>
          </thead>
        </table>
      </div>
      <div class="tbl-content">
        <table cellpadding="0" cellspacing="0" border="0">
          <tbody>
            {% for payment in all_user_payments %}
            <tr>
              <td colspan="3">{{payment.contract_number_id}}</td>
              <td colspan="3">{{payment.payment_id}}</td>
              <td colspan="3">{{payment.summ}}</td>
              <td colspan="5">{{payment.pay_datetime}}</td>
              <td colspan="6">
                <button
                  onclick="window.location.href='All_Payments/{{payment.payment_id}}/delete'"
                >
                  Delete
                </button>

                <button
                  onclick="window.location.href='All_Payments/{{payment.payment_id}}/edit'"
                >
                  Edit
                </button>

                <button
                  onclick="window.location.href='All_Payments/{{payment.payment_id}}/Report'"
                >
                  Get Report
                </button>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </section>
  </section>

  <section class="row-section">
    <section class="table-section" id="discounts" style="flex-grow: 1">
      <!--for demo wrap-->
      <h1>All User Discounts</h1>
      <div class="tbl-header">
        <table cellpadding="0" cellspacing="0" border="0">
          <thead>
            <tr>
              <th colspan="2" onclick="sort_click(this,'discounts', 'name')">
                Type
              </th>
              <th colspan="2" onclick="sort_click(this,'discounts', 'pecent')">
                Discount percentage
              </th>
              <th colspan="2">
                <button onclick="window.location.href='Add_Discount/'">
                  Add
                </button>
                <div class="input_search_box">
                  <input
                    type="text"
                    class="input_search"
                    onkeyup="filtering(this,'discounts')"
                  />
                  <span class="input_search_button" onclick="clear_input(this)"
                    >+</span
                  >
                </div>
              </th>
            </tr>
          </thead>
        </table>
      </div>
      <div class="tbl-content">
        <table cellpadding="0" cellspacing="0" border="0">
          <tbody>
            {% for discount in all_user_discounts %}
            <tr>
              <td colspan="2">{{discount.name}}</td>
              <td colspan="2">{{discount.pecent_of_discount}} %</td>
              <td colspan="2">
                <button
                  onclick="window.location.href='Discounts/{{discount.discount_id}}/delete'"
                >
                  Delete
                </button>

                <button
                  onclick="window.location.href='Discounts/{{discount.discount_id}}/edit'"
                >
                  Edit
                </button>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </section>

    <section class="table-section" id="accomodation" style="flex-grow: 2">
      <!--for demo wrap-->
      <h1>All User Accomodation</h1>
      <div class="tbl-header">
        <table cellpadding="0" cellspacing="0" border="0">
          <thead>
            <tr>
              <th
                colspan="2"
                onclick="sort_click(this,'accomodation', 'address')"
              >
                Address
              </th>
              <th
                colspan="1"
                onclick="sort_click(this,'accomodation', 'squeare')"
              >
                Squeare
              </th>
              <th
                colspan="1"
                onclick="sort_click(this,'accomodation', 'consumed')"
              >
                consumed
              </th>
              <th
                colspan="2"
                onclick="sort_click(this,'accomodation', 'date_in')"
              >
                Last date
              </th>
              <th colspan="1" onclick="sort_click(this,'accomodation', 'debt')">
                Debt
              </th>
              <th
                colspan="1"
                onclick="sort_click(this,'accomodation', 'prepayment')"
              >
                Prepayment
              </th>
              <th colspan="2">
                <button onclick="window.location.href='Add_Accomodation/'">
                  Add
                </button>
                <div class="input_search_box">
                  <input
                    type="text"
                    class="input_search"
                    onkeyup="filtering(this,'accomodation')"
                  />
                  <span class="input_search_button" onclick="clear_input(this)"
                    >+</span
                  >
                </div>
              </th>
            </tr>
          </thead>
        </table>
      </div>

      <div class="tbl-content">
        <table cellpadding="0" cellspacing="0" border="0">
          <tbody>
            {% for accomodation,status in all_user_accomodation_status %}
            <tr>
              <td colspan="2">{{accomodation.address}}</td>
              <td colspan="1">{{accomodation.squeare}}</td>
              {% if status %}
              <td colspan="1">{{status.consumed}}</td>
              <td colspan="2">{{status.date_in}}</td>
              <td colspan="1">{{status.debt}}</td>
              <td colspan="1">{{status.prepayment}}</td>
              {% else %}

              <td colspan="1">{{status}}</td>
              <td colspan="2">MM. DD, YYYY, h:m</td>
              <td colspan="1">{{status}}</td>
              <td colspan="1">{{status}}</td>

              {% endif %}
              <td colspan="2">
                <button
                  onclick="window.location.href='Accomodation/{{accomodation.accomodation_id}}/delete'"
                >
                  Delete
                </button>

                <button
                  onclick="window.location.href='Accomodation/{{accomodation.accomodation_id}}/edit'"
                >
                  Edit
                </button>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </section>
  </section>
</section>
{% endblock %} {% block scripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
<script type="text/javascript" src="{% static 'js/sorting_data.js' %}"></script>
{% endblock %}
